# Post-slashcode 14.04 release
# Theme change
# (ok, this isn't technically a schema edit, *but* this file kinda acts as our general upgrade documentation
# We've got two new themes, replacing the old slashcode.com one; chillax which is our default theme, and soylentnews
# which is the main site (and inherts most the templates via voodoo in THEME file).
# When updating, the site_info table needs a quick update to point the site from "slashcode" to "soylentnews"
# then symlink-tool/template-tool should be run. I recommend deleting out all the templates from the database 
# as well
TRUNCATE TABLE templates;

# Remove slashcode Theme and set to new default Theme
UPDATE site_info SET value='default' WHERE name='theme';

# Once deleting the theme out, and installing the new "default" theme which is a giant catch-all, add a variable
# to control the default skin
ALTER TABLE users_info ADD COLUMN skin varchar(255) DEFAULT NULL;
INSERT INTO vars (name, value, description) VALUES ('default_skin','chillax','Default skin to use in-case the user has not selected one');
# INSERT INTO vars (name, value, description) VALUES ('default_skin','soylentnews','Default skin to use in-case the user has not selected one');


# New SoylentNews Slashcode updates 2014-06-01.
UPDATE vars SET value = 'slashcode_06_14' WHERE name = 'cvs_tag_currentcode';


# Allow submissions to have longer titles. story_text title is set to VARCHAR(100) so match here.
ALTER TABLE submissions MODIFY subj VARCHAR(100);


# Add new voting field
# NOTE: this shouldn't be in users, but it makes audioguys job easy, and the schema
# is already fucking ugly as sin so ....
ALTER TABLE users ADD COLUMN willing_to_vote tinyint UNSIGNED DEFAULT 0 NOT NULL;


# Disable portscanning by default
INSERT INTO vars (name, value, description) VALUES ('enable_portscan','0','Enable portscanning of proxys');


# Setup Imporved Threaded comments
INSERT INTO commentmodes (mode, name, description) VALUES ('improvedthreaded','Impoved Threaded','');
ALTER TABLE users_comments CHANGE mode mode ENUM('flat','nested','nocomment','thread','improvedthreaded') DEFAULT 'improvedthreaded' NOT NULL;

# Set all users on theraded or nested to improved threaded
UPDATE users_comments SET mode = 'improvedthreaded' WHERE mode = 'nested' OR mode = 'thread';


# Add in var to set if Newsletters are sent to new users by default
INSERT INTO vars (name, value, description) VALUES ('newsletter_by_default','0','Turn on newsletter sending by default for new users. 0 = off | 1 = on');


# Update for longer nicknames
UPDATE vars SET value = '35' WHERE name = 'nick_maxlen';
UPDATE vars SET value = '^[a-zA-Z_][ a-zA-Z0-9$_.+!*\'(),-]{0,34}$' WHERE name = 'nick_regex';
ALTER TABLE users CHANGE nickname nickname varchar(35) DEFAULT '' NOT NULL;
ALTER TABLE users CHANGE matchname matchname varchar(35);


# Add admin only for subscription prefs
INSERT INTO vars (name, value, description) VALUES ('subscribe_admin_only', 1, 'Subscription prefs only enabled for admins?');


# Remove deleted plugins
DELETE FROM site_info WHERE description LIKE '%Achievements%';
DELETE FROM site_info WHERE description LIKE '%PubKey%' or value = 'PubKey';
DELETE FROM site_info WHERE description LIKE '%Sphinx%';
DELETE FROM site_info WHERE description LIKE '%Users2%' or value = 'Users2';
DELETE FROM site_info WHERE description LIKE '%FireHose%';
DELETE FROM site_info WHERE description LIKE '%Tag%';


# Blocks update
ALTER TABLE blocks ADD COLUMN default_block tinyint UNSIGNED DEFAULT 0 NOT NULL;
ALTER TABLE blocks ADD COLUMN hidden tinyint UNSIGNED DEFAULT 0 NOT NULL;
ALTER TABLE blocks ADD COLUMN always_on tinyint UNSIGNED DEFAULT 0 NOT NULL;
UPDATE blocks SET default_block = 1 WHERE bid = 'poll' OR bid = 'index_more' OR bid = 'index_qlinks' OR bid = 'top10journals';
UPDATE blocks SET hidden = 1 WHERE bid = 'features_qlinks' OR bid ='recenttopics' OR bid ='spamurlregexes' OR bid ='subscriber_plug' OR bid ='articles_more' OR bid = 'features_more';
UPDATE blocks SET ordernum = 100 WHERE bid = 'mysite';
UPDATE blocks SET ordernum = 3 WHERE bid = 'topcomments';
UPDATE blocks SET seclev = 500 where bid = 'index_qlinks';
DELETE FROM blocks WHERE bid = 'newestthree';

# Remove all dynmaic user blocks or new blocks will not show up
TRUNCATE TABLE dynamic_users_blocks;

# Insert site news from old site_news template (Pull from your current site news rather than using this default if you already have it.)
INSERT INTO blocks (bid, block, seclev, type, description, skin, ordernum, title, portal, url, rdf, retrieve, default_block, always_on) VALUES ('site_news','<!-- begin site_news block -->\r\n\r\nYou should put some site news here that your users might enjoy.\r\n\r\n<!-- end site_news block -->\r\n\r\n',500,'static',NULL,'mainpage',1,'Site News',1,NULL,NULL,0,1,1);
	
# Delete slashboxes from all users
UPDATE users_index SET slashboxes = '';


# Delet story_never_author for all users to fix author bug (do this each time until bug fixed)
UPDATE users_index SET story_never_author = '';

##############################
# Post-slashcode 14.06 release

# Allow Reltionship Change Messages to get sent for non subscribers
UPDATE message_codes SET subscribe=0 WHERE code=12;

# Update to allow for end-to-end utf8
INSERT INTO vars (name, value, description) VALUES ('utf8', '1', '1 = Use end-to-end unicode, 0 = Convert unicode to html entities');

# Delete utf-8 unfriendly filters
DELETE From content_filters WHERE filter_id=3 OR filter_id=4 OR filter_id=5 OR filter_id=6 OR filter_id=9 OR filter_id=10 OR filter_id=11 OR filter_id=12 OR filter_id=13 OR filter_id=16 OR filter_id=17;

# Change every last table to the utf8 character set
ALTER DATABASE CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE abusers CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_admin CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_artcom CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_build_uidip CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_build_unique_uid CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_temp CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_temp_errors CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_temp_host_addr CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_temp_other CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_temp_rss CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE accesslog_temp_subscriber CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE achievements CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE ajax_ops CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE al2 CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE al2_log CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE al2_log_comments CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE al2_types CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE authors_cache CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE auto_poll CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE backup_blocks CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE badpasswords CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE blobs CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE blocks CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE classes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE clout_types CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE code_param CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE comment_log CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE comment_promote_log CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE comment_text CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE commentmodes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE comments CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE content_filters CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE css CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE css_type CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE dateformats CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE dbs CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE dbs_readerstatus CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE dbs_readerstatus_queries CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE discussion_kinds CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE discussions CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE dst CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE dynamic_blocks CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE dynamic_user_blocks CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE file_queue CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_history CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_ogaspt CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_section CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_section_settings CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_setting_log CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_skin_volume CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_tab CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_text CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_topics_rendered CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_update_log CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_view CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE firehose_view_settings CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE formkeys CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE globj_adminnotes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE globj_types CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE globj_urls CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE globjs CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE globjs_viewed CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE globjs_viewed_archived CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE hooks CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE humanconf CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE humanconf_pool CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE humanconf_questions CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE journal_themes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE journal_transfer CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE journals CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE journals_text CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE menus CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE message_codes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE message_deliverymodes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE message_drop CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE message_log CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE message_web CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE message_web_text CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE metamodlog CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE misc_user_opts CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE moderatorlog CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE modreasons CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE open_proxies CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE pagemark CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE people CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE pollanswers CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE pollquestions CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE pollvoters CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE preview CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE preview_param CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE projects CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE querylog CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE related_links CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE related_stories CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE remarks CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE reskey_failures CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE reskey_hourlysalt CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE reskey_resource_checks CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE reskey_resources CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE reskey_sessions CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE reskey_vars CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE reskeys CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE rss_raw CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE sessions CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE shill_ids CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE signoff CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE site_info CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE skin_colors CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE skins CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE slashd_errnotes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE slashd_status CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE soap_methods CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE spamarmors CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE sphinx_counter CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE sphinx_counter_archived CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE sphinx_index CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE sphinx_search CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE static_files CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE stats_daily CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE stats_graphs_index CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE stories CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE story_dirty CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE story_files CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE story_param CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE story_render_dirty CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE story_text CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE story_topics_chosen CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE story_topics_rendered CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE string_param CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE submission_param CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE submissions CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE submissions_notes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tag_params CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tagboxes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tagboxlog_feeder CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tagcommand_adminlog CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tagcommand_adminlog_sfnet CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tagname_cache CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tagname_params CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tagnames CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tagnames_similarity_rendered CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tagnames_synonyms_chosen CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tags CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tags_dayofweek CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tags_deactivated CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tags_hourofday CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tags_peerweight CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tags_searched CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tags_udc CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tags_userchange CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE templates CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE topic_nexus CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE topic_nexus_dirty CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE topic_nexus_extras CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE topic_param CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE topic_parents CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE topics CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE tzcodes CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE uncommonstorywords CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE urls CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE user_achievement_streaks CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE user_achievements CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_acl CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_clout CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_comments CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_comments_read_log CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_hits CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_index CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_info CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_logtokens CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_messages CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_openid CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_openid_reskeys CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_param CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE users_prefs CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE vars CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
ALTER TABLE xsite_auth_log CONVERT TO CHARACTER SET utf8 COLLATE utf8_unicode_ci;
